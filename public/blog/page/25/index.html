
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Hack hack hack...</title>
  <meta name="author" content="Adam Jonas">

  
  <meta name="description" content="Scopes1
2
3
4
class Tweet &lt; ActiveRecord::Base scope :recent, order(&#39;created_at desc&#39;).limit(4) scope :graveyard, where(show_location: &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="bPr3kB-X2beP1o9InhOKH9ci-gljU3a7NLEeap4urfc" />

  
  <link rel="canonical" href="http://adamjonas.com/blog/page/25/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Hack hack hack..." type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-35486864-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">Adam Jonas</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">Hack hack hack...</a></h1>
  
    <h2>An open journal-- some of it written for you, but most of it is for me.</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:adamjonas.com" />
    <input class="search" type="text" name="q" results="100" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/glossary">Glossary</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/code-school-rails-2/">Code School Rails 2</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-09-05T15:00:00-04:00" pubdate data-updated="true">Sep 5<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><figure class='code'><figcaption><span>Scopes</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Tweet</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>  <span class="n">scope</span> <span class="ss">:recent</span><span class="p">,</span> <span class="n">order</span><span class="p">(</span><span class="s1">&#39;created_at desc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'>  <span class="n">scope</span> <span class="ss">:graveyard</span><span class="p">,</span> <span class="n">where</span><span class="p">(</span><span class="n">show_location</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">location</span><span class="p">:</span> <span class="s2">&quot;graveyard&quot;</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>be careful of return values with callbacks. Once it hits a false, everything will halt.</p>

<figure class='code'><figcaption><span>Foreign Key Options</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Tweet</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>  <span class="n">has_one</span> <span class="ss">:location</span><span class="p">,</span> <span class="ss">dependent</span><span class="p">:</span> <span class="ss">:destroy</span><span class="p">,</span> <span class="n">foreign_key</span><span class="p">:</span> <span class="ss">:tweeter_id</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>n+1 query</p>

<figure class='code'><figcaption><span>Migration syntax</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">change</span>
</span><span class='line'>  <span class="n">create_table</span><span class="p">(</span><span class="ss">:categorizations</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
</span><span class='line'>    <span class="n">t</span><span class="o">.</span><span class="n">integer</span> <span class="ss">:tweet_id</span>
</span><span class='line'>    <span class="c1"># there is no comma seperation here...</span>
</span><span class='line'>    <span class="n">t</span><span class="o">.</span><span class="n">integer</span> <span class="ss">:category_id</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>belongs_to :singular
has_many :plaural</p>

<p>put and delete are hidden in the html 5 data-method
This is all done with unobtrusive javascript.</p>

<figure class='code'><figcaption><span>link_to</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">link_to</span> <span class="s1">&#39;All Zombies&#39;</span><span class="p">,</span> <span class="n">zombies_path</span>
</span><span class='line'><span class="n">link_to</span> <span class="s1">&#39;All Zombies&#39;</span><span class="p">,</span> <span class="n">new_zombies_path</span>
</span><span class='line'><span class="n">link_to</span> <span class="s1">&#39;Edit Zombies&#39;</span><span class="p">,</span> <span class="n">edit_zombies_path</span><span class="p">(</span><span class="vi">@zombie</span><span class="p">)</span>
</span><span class='line'><span class="n">link_to</span> <span class="s1">&#39;Show Zombies&#39;</span><span class="p">,</span> <span class="n">zombie_path</span><span class="p">(</span><span class="vi">@zombie</span><span class="p">)</span>
</span><span class='line'><span class="n">link_to</span> <span class="s1">&#39;Show Zombies&#39;</span><span class="p">,</span> <span class="vi">@zombie</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">&lt;</span><span class="n">h2</span><span class="o">&gt;&lt;</span><span class="sx">%= @zombie.name %&gt;&#39;s weapons&lt;/h2&gt;</span>
</span><span class='line'><span class="sx">&lt;ul&gt;</span>
</span><span class='line'><span class="sx">  &lt;% @weapons.each do |w| %&gt;</span>
</span><span class='line'><span class="sx">    &lt;li&gt;&lt;%=</span> <span class="n">link_to</span> <span class="n">w</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="o">[</span><span class="vi">@zombie</span><span class="p">,</span> <span class="n">w</span><span class="o">]</span> <span class="sx">%&gt;&lt;/li&gt;</span>
</span><span class='line'>    <span class="c1">#the relative path shorthand is equal to &#39;link_to w.name, zombie_weapon_path(@zombie, w)&#39;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="sx">% end %&gt;</span>
</span><span class='line'><span class="sx">&lt;/ul&gt;</span>
</span><span class='line'><span class="c1">#note that weapon is singular here...</span>
</span><span class='line'><span class="o">&lt;%=</span> <span class="n">link_to</span> <span class="s2">&quot;New Weapon&quot;</span><span class="p">,</span> <span class="n">new_zombie_weapon_path</span><span class="p">(</span><span class="vi">@zombie</span><span class="p">)</span> <span class="o">%&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>??I&#8217;m not really sure about the logic of passing in variables here. How do we know the order and what is appropriate?</p>

<p>same with form_for</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">&lt;%=</span> <span class="n">form_for</span><span class="p">(</span><span class="o">[</span><span class="vi">@zombie</span><span class="p">,</span> <span class="vi">@weapon</span><span class="o">]</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="o">%&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Mad Mimi- gem integration for subscription lists</p>

<h3>Asset Pipeline</h3>

<p>app dir - app specific code
lib dir - shared code
vendor dir - 3rd party code</p>

<figure class='code'><figcaption><span>Call with assets&#8211; it will check all the directories</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">assets</span><span class="o">/</span><span class="n">custom</span><span class="o">.</span><span class="n">js</span>
</span><span class='line'><span class="n">assets</span><span class="o">/</span><span class="n">rails</span><span class="o">.</span><span class="n">png</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">low_ammo</span><span class="p">(</span><span class="n">weapon</span><span class="p">,</span> <span class="n">zombie</span><span class="p">)</span>
</span><span class='line'>  <span class="n">attachments</span><span class="o">[</span><span class="s2">&quot;weapon.jpg&quot;</span><span class="o">]</span> <span class="o">=</span> <span class="n">weapon</span><span class="o">.</span><span class="n">picture_file</span>
</span><span class='line'>  <span class="n">mail</span> <span class="ss">to</span><span class="p">:</span> <span class="n">zombie</span><span class="o">.</span><span class="n">email</span><span class="p">,</span> <span class="ss">subject</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">weapon</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> has low ammo&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><a href="http://guides.rubyonrails.org/action_mailer_basics.html#sending-emails-with-attachments">See</a></p>

<p>Asset Tags:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">auto_discovery_link_tag</span>
</span><span class='line'><span class="n">javascript_include_tag</span>
</span><span class='line'><span class="n">stylesheet_link_tag</span>
</span><span class='line'><span class="n">image_tag</span>
</span><span class='line'><span class="n">video_tag</span>
</span><span class='line'><span class="n">audio_tag</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>e.g.</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">&lt;%=</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">&quot;weapon.jpg&quot;</span><span class="p">)</span> <span class="o">%&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>StyleSheet- referencing an image</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">h2</span><span class="c1">#newUser {</span>
</span><span class='line'>  <span class="n">text</span><span class="o">-</span><span class="ss">indent</span><span class="p">:</span> <span class="o">-</span><span class="mi">9999</span><span class="n">px</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">a</span> <span class="p">{</span>
</span><span class='line'>  <span class="ss">height</span><span class="p">:</span> <span class="mi">64</span><span class="n">px</span><span class="p">;</span>
</span><span class='line'>  <span class="ss">width</span><span class="p">:</span> <span class="mi">50</span><span class="n">px</span><span class="p">;</span>
</span><span class='line'>  <span class="nb">display</span><span class="p">:</span> <span class="n">block</span><span class="p">;</span>
</span><span class='line'>  <span class="ss">background</span><span class="p">:</span> <span class="n">url</span><span class="p">(</span><span class="o">&lt;%=</span> <span class="n">asset_path</span><span class="p">(</span><span class="s2">&quot;rails.png&quot;</span><span class="p">)</span> <span class="o">%&gt;</span><span class="p">)</span> <span class="n">no</span><span class="o">-</span><span class="n">repeat</span><span class="p">;</span>
</span><span class='line'>  <span class="c1">#created an asset path link because this file is erb....</span>
</span><span class='line'><span class="p">}}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Syntax</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span> <span class="nf">-&gt;</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#displayWeaponForm&#39;</span><span class="p">).</span><span class="nx">click</span> <span class="nf">(event) -&gt;</span>
</span><span class='line'>    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#newWeapon&#39;</span><span class="p">).</span><span class="nx">show</span><span class="p">()</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>in the controller</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">WeaponsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">fire_weapon</span>
</span><span class='line'>    <span class="vi">@weapon</span> <span class="o">=</span> <span class="no">Weapon</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@weapon</span><span class="o">.</span><span class="n">fire!</span>
</span><span class='line'>    <span class="k">if</span> <span class="vi">@weapon</span><span class="o">.</span><span class="n">low_ammo?</span>
</span><span class='line'>      <span class="n">render</span> <span class="ss">:fire_and_reload</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>If the &#8216;if&#8217; conditionally is not met, it will fire the default show page which corresponds to the name of the definition</p>

<figure class='code'><figcaption><span>Custom Resource Routes</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="ss">RailsForZombies</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">resources</span> <span class="ss">:zombies</span> <span class="k">do</span>
</span><span class='line'>    <span class="n">resources</span> <span class="ss">:weapons</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">put</span> <span class="ss">:toggle_condition</span><span class="p">,</span> <span class="ss">on</span><span class="p">:</span> <span class="ss">:member</span>
</span><span class='line'>      <span class="n">put</span> <span class="ss">:reload</span><span class="p">,</span> <span class="ss">on</span><span class="p">:</span> <span class="ss">:member</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here we are sending the entire @weapon object</p>

<figure class='code'><figcaption><span>Rendering JSON and options</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">WeaponsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>    <span class="vi">@weapon</span> <span class="o">=</span> <span class="no">Weapon</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:weapon</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>    <span class="k">if</span> <span class="vi">@weapon</span><span class="o">.</span><span class="n">save</span>
</span><span class='line'>      <span class="c1">#location option-- an API best practice on where to find the URL of the resource</span>
</span><span class='line'>      <span class="n">render</span> <span class="ss">json</span><span class="p">:</span> <span class="vi">@weapon</span><span class="p">,</span> <span class="ss">status</span><span class="p">:</span> <span class="ss">:created</span><span class="p">,</span> <span class="ss">location</span><span class="p">:</span> <span class="vi">@weapon</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="n">render</span> <span class="ss">json</span><span class="p">:</span> <span class="vi">@weapon</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="ss">status</span><span class="p">:</span> <span class="ss">:unprocessable_entity</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here we are only interested in the ammo attribute of the weapon JSON object. This limits the amount of data we are sending. We don&#8217;t want to send more than we need. <em>Data isn&#8217;t free.</em></p>

<figure class='code'><figcaption><span>Json with Options</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">WeaponsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">reload</span>
</span><span class='line'>    <span class="vi">@weapon</span> <span class="o">=</span> <span class="no">Weapon</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>    <span class="k">if</span> <span class="vi">@weapon</span><span class="o">.</span><span class="n">ammo</span> <span class="o">&lt;</span> <span class="mi">30</span>
</span><span class='line'>      <span class="vi">@weapon</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:ammo_to_reload</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>      <span class="n">render</span> <span class="ss">json</span><span class="p">:</span> <span class="vi">@weapon</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="ss">only</span><span class="p">:</span> <span class="ss">:ammo</span><span class="p">),</span> <span class="ss">status</span><span class="p">:</span> <span class="ss">:ok</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="n">render</span> <span class="ss">json</span><span class="p">:</span> <span class="vi">@weapon</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="ss">only</span><span class="p">:</span> <span class="ss">:ammo</span><span class="p">),</span> <span class="ss">status</span><span class="p">:</span> <span class="ss">:unprocessable_entity</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>More JSON options in the controller</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">render</span> <span class="ss">json</span><span class="p">:</span> <span class="vi">@weapon</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="ss">except</span><span class="p">:</span> <span class="o">[</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:created_at</span><span class="p">,</span> <span class="ss">:updated_at</span><span class="o">]</span><span class="p">,</span> <span class="kp">include</span><span class="p">:</span> <span class="ss">:zombie</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><em>Important</em>
The JSON object you send back doesn&#8217;t need to correspond to a real world object. The slow part is always opening up the connection. So you would rather send as much as you can per connection rather than send two requests.</p>

<h3>Routes</h3>

<p>there is a :member route
:  which acts on a single resource
There is a :collection route
:  which acts on a group of resouces</p>

<p><a href="http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json">as_json</a></p>

<figure class='code'><figcaption><span>Nested Options in the Model</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Zombie</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>  <span class="n">has_many</span> <span class="ss">:weapons</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">as_json</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="kp">nil</span><span class="p">)</span>
</span><span class='line'>    <span class="k">super</span><span class="p">(</span><span class="n">options</span> <span class="o">||</span>
</span><span class='line'>    <span class="c1">#this is obviously nested. a little counter intuitive on how this is set up</span>
</span><span class='line'>      <span class="p">{</span><span class="ss">only</span><span class="p">:</span> <span class="ss">:name</span><span class="p">,</span> <span class="kp">include</span><span class="p">:</span> <span class="p">{</span><span class="ss">weapons</span><span class="p">:</span> <span class="p">{</span><span class="ss">only</span><span class="p">:</span> <span class="o">[</span><span class="ss">:ammo</span><span class="p">,</span> <span class="ss">:name</span><span class="o">]</span><span class="p">}}})</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#condition&#39;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;&lt;%= @weapon.condition %&gt;&quot;</span><span class="p">).</span><span class="nx">effect</span><span class="p">(</span><span class="s2">&quot;highlight&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>I have a bad habit of putting > in my equations which seem to break things&#8230;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#ammo&#39;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s1">&#39;&lt;%= @weapon.ammo %&gt;&#39;</span><span class="p">);</span>
</span><span class='line'><span class="o">&lt;%</span> <span class="k">if</span> <span class="err">@</span><span class="nx">weapon</span><span class="p">.</span><span class="nx">ammo</span> <span class="o">&gt;=</span> <span class="mi">30</span> <span class="o">%&gt;</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#reload_form&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">();</span>
</span><span class='line'><span class="o">&lt;%</span> <span class="nx">end</span> <span class="o">%&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Coffee Script</h3>

<p><a href="http://jashkenas.github.com/coffee-script/">Documentation</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span> <span class="nf">-&gt;</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s">&#39;div#reload_form form&#39;</span><span class="p">).</span><span class="nx">submit</span> <span class="nf">(event) -&gt;</span>
</span><span class='line'>    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
</span><span class='line'>    <span class="nv">form = </span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
</span><span class='line'>    <span class="nv">url = </span><span class="nx">form</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;action&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="nv">ammo = </span><span class="nx">$</span><span class="p">(</span><span class="s">&#39;#ammo_to_reload&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span>
</span><span class='line'>      <span class="nv">type: </span><span class="s">&#39;put&#39;</span>
</span><span class='line'>      <span class="nv">url: </span><span class="nx">url</span>
</span><span class='line'>      <span class="nv">data: </span><span class="p">{</span><span class="nv">ammo_to_reload: </span><span class="nx">ammo</span><span class="p">}</span>
</span><span class='line'>      <span class="nv">dataType: </span><span class="s">&#39;json&#39;</span>
</span><span class='line'>      <span class="nv">success: </span><span class="nf">(json) -&gt;</span>
</span><span class='line'>        <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#ammo&#39;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">json</span><span class="p">.</span><span class="nx">ammo</span><span class="p">).</span><span class="nx">effect</span><span class="p">(</span><span class="s">&quot;highlight&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#reload_form&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">()</span> <span class="k">if</span> <span class="nx">json</span><span class="p">.</span><span class="nx">ammo</span> <span class="o">&gt;=</span> <span class="mi">30</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/mysql-db-design/">MySQL DB Design</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-09-05T11:51:00-04:00" pubdate data-updated="true">Sep 5<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://code.google.com/edu/tools101/mysql.html">MySQL Google</a></p>

<p><em>Data normalization</em>
:  This is the process we go through to develop a design that is free of redundant data and that can be consistently and correctly modified</p>

<p><em>primary keys</em> uniquely identify a record in a table, and <em>foreign keys</em> are used to relate tables
- Every record must have a unique primary key which should not be reused once deleted</p>

<p><em>Referential integrity</em>
:  The data in a foreign key needs to match the primary key in some record of the original table. Referential integrity assures there are no broken links between tables. Note that if you delete a record in the original table, for example, you delete one of the customers from the customer table, referential integrity requires that you delete all references to that customer in the order table.</p>

<h3>MySQL Exercises</h3>

<ol>
<li>Start up MySQL with</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysql -uroot -ppassword</span></code></pre></td></tr></table></div></figure>


<p>Creating a table&#8230;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>create table customer (cust_no int not null auto_increment, name varchar(40),
</span><span class='line'>address varchar(40), phone varchar(12), primary key(cust_no));</span></code></pre></td></tr></table></div></figure>


<p>&#8220;varchar&#8221; which means variable-length strings. The numbers following &#8220;varchar&#8221; in the command above indicate maximum length for the data stored in the field. We also set up cust_no to be the primary key.</p>

<p>The orders table&#8230;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>create table orders (order_no int not null auto_increment, FK_cust_no int not null, 
</span><span class='line'>foreign key(FK_cust_no) references customer(cust_no), primary key(order_no));</span></code></pre></td></tr></table></div></figure>


<p>There are only two fields in this table. The order_no field is a primary key, and is an integer, not null and it will auto increment. The cust_no field is a foreign key. We have named it FK_cust_no in the orders table to distinguish it from the cust_no field in the customer table.</p>

<p><em>A foreign key is a field that references a primary key in another table.</em> In the command, we indicate that the FK_cust_no field is a foreign key referencing the cust_no field in customer, indicated by the &#8220;foreign key(FK_cust_no) references customer(cust_no)&#8221; part of the command. By setting the table up this way, MySQL will enforce constraints&#8211; any order that we enter into the orders table must reference a valid customer in the customer table. If we enter a cust_no in orders that does not exist in customers, an error will result.</p>

<p>A <em>transaction</em> is a sequence of individual database operations that are grouped together. A transaction will never be complete unless each individual operation within the group is successful. If any operation within the transaction fails, the entire transaction will fail. Transactions are a relatively new addition to MySQL but not to relational database systems in general.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/omniauth/">Omniauth</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-09-04T12:17:00-04:00" pubdate data-updated="true">Sep 4<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><a href="http://sleekd.com/tutorials/setting-up-omniauth-authentication-with-facebook/">facebook</a></li>
<li><a href="https://github.com/intridea/omniauth">The Gem</a></li>
</ul>


<figure class='code'><figcaption><span>opening the connection</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="vi">@graph</span> <span class="o">=</span> <span class="ss">Koala</span><span class="p">:</span><span class="ss">:Facebook</span><span class="o">::</span><span class="no">API</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">oauth_access_token</span><span class="p">)</span>
</span><span class='line'><span class="c1">#for an hour or so I wasn&#39;t loading the proper access_token. </span>
</span><span class='line'><span class="c1">#the problem was I wasn&#39;t loading it as a string!!</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="https://github.com/xfernandox/babl">Babl repo</a></li>
<li><a href="https://speakerdeck.com/xfernandox/authenticate-with-omniauth">slides on omniauth</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/routes-of-the-app/">Routes of the App</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-08-23T12:35:00-04:00" pubdate data-updated="true">Aug 23<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>The plan for the refactor</h3>

<ol>
<li>Multiple errors are being mass assigned a unique tag</li>
<li><p>multiple tags are being assigned to an error</p></li>
<li><p>individual tags are assigned to an individual error</p></li>
<li>individual tags are being removed from an error</li>
</ol>


<p>Invidual Tag and Error
  <code>DELETE /errors/id/tags/id</code> - Remove this tag from that error
  <code>POST /errors/id/tags/id</code> - Adding this tag to that error</p>

<p>Multiple Tags to an Error
  <code>PUT /errors/id/tags</code> -</p>

<p>Update an Error
  # Sure, it could also accept tags tag_tokens=
  <code>PUT /errors/id</code></p>

<p>Multiple Errors are Assigned One Tag
  <code>POST /tags/id/errors</code>
  {
  error_ids => [],
  }</p>

<p>  Supply a Tag ID in the URL along with an array of error_ids.</p>

<p>  <code>DELETE /tags/id/errors</code></p>

<h3>Creating the controllers</h3>

<p><code>tags_controller</code> is responsible for updating <code>tags_controller</code></p>

<p>the errors controller is responsible for updating errors</p>

<ul>
<li>the errors/tags controller is responsible for update tags on an error</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/haw-day14/">HAW-day14</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-08-20T12:10:00-04:00" pubdate data-updated="true">Aug 20<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><figure class='code'><figcaption><span>Debug Method</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">allVals</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// location.reload()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Look up dataTypes &#8211; text, json, script (js), xml, html
This the request type format that we want it in.</p>

<h3>JQuery Token Input</h3>

<p>http://railscasts.com/episodes/258-token-fields
need to make sure the controller responds to .json
-the default has it nested in an @tags key. To remove that we need to map it to its attributes like so&#8211;
<code>format.json { render :json =&gt; @tags.collect{|t| t.attributes}  }</code></p>

<ul>
<li>prePoulation was an issue as well</li>
</ul>


<figure class='code'><figcaption><span>Symobol to Proc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="o">].</span><span class="n">collect</span><span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">i</span><span class="o">.</span><span class="n">to_s</span><span class="p">}</span> <span class="c1">#=&gt; [&quot;1&quot;, &quot;2&quot;]</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>To Jquery plugin to gem

<ul>
<li>query isn&#8217;t searching properly in the tags controller</li>
<li>remove the submit button for tag tokens</li>
</ul>
</li>
</ul>


<p>&#8216;f.text_field options&#8217; for onAdd or on Remove</p>

<ul>
<li><p>put the &#8216;:controller => :error, :action => :resolve_on_airbrake&#8217; on the fix button
or gather all the errors tagged with fixed and move this task to a background job&#8230;</p></li>
<li><p>sidekiq runs on redis</p>

<ul>
<li>create a worker folder</li>
<li>??needs to be serialized into redis?</li>
<li>sidekiq will run if there is an error: can disable the retry option with an option</li>
<li>pool thread limits the number of jobs that can be run</li>
</ul>
</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/haw-day13/">HAW-day13</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-08-17T13:43:00-04:00" pubdate data-updated="true">Aug 17<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><p>Checkboxes</p>

<ul>
<li>return default goes at the end</li>
<li><p>preventDefault() goes at the beginning</p></li>
<li><p>return false goes at the end</p></li>
<li><p>we can import the deploys with client.deploys(&#8216;project#&#8217;).first</p></li>
<li><p>You can also pass local variables into partials, making them even more powerful and flexible. For example, you can use this technique to reduce duplication between new and edit pages, while still keeping a bit of distinct content:</p></li>
</ul>
</li>
</ul>


<p>new.html.erb</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;h1&gt;New zone&lt;/h1&gt;
</span><span class='line'>&lt;%= error_messages_for :zone %&gt;
</span><span class='line'>&lt;%= render :partial =&gt; "form", :locals =&gt; { :zone =&gt; @zone } %&gt;</span></code></pre></td></tr></table></div></figure>


<h3>Specifying a class in a link_to</h3>

<figure class='code'><figcaption><span>Using Twitter Bootstrap</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn-group pull-right&quot;</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="sx">%=link_to &quot; Refresh Errors&quot;, errors_import_path, :class =</span><span class="o">&gt;</span> <span class="s1">&#39;btn icon-refresh btn-success&#39;</span> <span class="o">%&gt;</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/haw-day12/">HAW-day12</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-08-16T10:19:00-04:00" pubdate data-updated="true">Aug 16<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li>js buttons on tag show pages</li>
<li>fix checkboxes/mass assigning tags</li>
</ul>


<h3>respond_to</h3>

<p>This is basically a glorified case statement&#8230;</p>

<p>if no action is specified the default is the action of the namespace</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">tag</span>
</span><span class='line'>    <span class="c1">#some code</span>
</span><span class='line'>    <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
</span><span class='line'>      <span class="n">f</span><span class="o">.</span><span class="n">html</span> <span class="p">{</span><span class="n">redirect_to</span> <span class="ss">:back</span><span class="p">}</span>
</span><span class='line'>      <span class="n">f</span><span class="o">.</span><span class="n">js</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>So it looks for tag.js as the default&#8230;</p>

<ul>
<li><p>BUG:</p>

<ul>
<li>tell firefox not to autocomplete</li>
</ul>
</li>
<li><p>checkboxes</p></li>
<li>get all the values</li>
<li><p>submit to server</p></li>
<li><p>loop through the elements</p></li>
<li>gather all the values (which are the ids)</li>
<li>find errors by ids</li>
<li>push in tag name signal</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/jquery-air-intermediate/">Jquery-air-intermediate</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-08-15T15:35:00-04:00" pubdate data-updated="true">Aug 15<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><figure class='code'><figcaption><span>Retriving the href</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#tabs ul li:last a&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">)</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#tabs ul li:last a&#39;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;flights&#39;</span><span class="p">)</span> <span class="c1">//this would be from an html5 data tag</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>event delegation-</li>
<li>it can be method chained and performs faster than live</li>
<li>&#8217;$(document).delegate&#8217;</li>
</ul>


<p><strong><em>Don&#8217;t forget the brackets on the selector!!</em></strong></p>

<h3>eq selector</h3>

<figure class='code'><figcaption><span>eq(element#) - a selector</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;ol.econ­omy-class li.ro­w:eq(1) ol li:eq­(3)&#39;</span><span class="p">).</span><span class="nx">html</span><span class="err">­</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;ol.econ­omy-class li.ro­w:eq(1) ol li:eq­(3) a&#39;</span><span class="p">).</span><span class="nx">a</span><span class="err">­</span><span class="nx">ttr</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="err">­</span><span class="p">);</span>
</span><span class='line'><span class="c1">// to access the href you need to specify the a tag</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;ol.econ­omy-class li.ro­w:eq(1) ol li:eq­(3) a&#39;</span><span class="p">).</span><span class="nx">d</span><span class="err">­</span><span class="nx">ata</span><span class="p">(</span><span class="s1">&#39;seat&#39;</span><span class="err">­</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.seating-chart a.available&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">){</span>
</span><span class='line'>  <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;a.available&#39;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;selected&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Bind Element</h3>

<ul>
<li>jQuery bind() function is used to attach an event handler to elements, while the unbind() is used to detached an existing event handler from elements.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.seating-chart a.available&#39;</span><span class="p">).</span><span class="nx">bind</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">click</span><span class="o">:</span> <span class="nx">selectSeat</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>This allows you to list multiple events for each element. NOTE the different syntax, this becomes like a MAP now (very similar to a hash)</li>
</ul>


<h3>Unbind Element</h3>

<ul>
<li>Let’s imagine the following scenario&#8230;</li>
<li>The user clicks on a “vote” button.</li>
<li>Some AJAX calls are performed.</li>
<li>After a successful AJAX call you setup a cookie to deny further votes from this machine.</li>
<li><p>So one possible solution is to unbind the click event&#8230;</p></li>
<li><p>Have something happen on a click event, but only once! Unbind the click handler after the element has been clicked once.</p></li>
</ul>


<figure class='code'><figcaption><span>Once and only once&#8230;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#my-selector&#39;</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>       <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">);</span>
</span><span class='line'>       <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Clicked and unbound!&#39;</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span>Jquery Air</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">selectSeat</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.selected&#39;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;selected&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;selected&#39;</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="nx">selectSeat</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#seatSelected&#39;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;seat&#39;</span><span class="p">));</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#confirm-seat&#39;</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div.seating-chart li a.available&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">selectSeat</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Live Event</h3>

<p><code>$('a.confirm-upgrade').live("click", confirmUpgrade);</code></p>

<ul>
<li>Bind binds to the event one time</li>
<li>Live will look for that event now or in the future and will catch it and call the right function</li>
</ul>


<h3>Delegate</h3>

<figure class='code'><figcaption><span>Delegate > live</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#flights a&#39;</span><span class="p">).</span><span class="nx">live</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="nx">selectFlight</span><span class="p">);</span>
</span><span class='line'><span class="c1">// is the same as</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">delegate</span><span class="p">(</span><span class="s2">&quot;#flights a&quot;</span><span class="p">,</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="nx">selectFlight</span><span class="p">);</span>
</span><span class='line'><span class="c1">// this is too general. It would be better if you just checked inside a specific element</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="err">#</span><span class="nx">tabs</span> <span class="nx">div</span><span class="p">).</span><span class="nx">delegate</span><span class="p">(</span><span class="s2">&quot;#flights a&quot;</span><span class="p">,</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="nx">selectFlight</span><span class="p">);</span>
</span><span class='line'><span class="c1">// check inside the element rather than the entire page</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Delegate can be method chained and it is more performant</li>
</ul>


<h3>Ajax</h3>

<ul>
<li>Video2</li>
<li>$.get and $.ajax are alternatives. $.ajax is slightly more</li>
<li>cache: false option ensures that your browser won&#8217;t cache the html for every request</li>
<li>Error handling</li>
<li>Loading div - call beforeSend the AJAX invoked then hide it in the complete:</li>
<li>If it returns successfully - success: and if not - error:</li>
</ul>


<h3>Mistake I keep making</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">fetchFirstClassConfirm</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">flight_id</span> <span class="o">=</span> <span class="mi">815</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;/flights/&#39;</span> <span class="o">+</span> <span class="nx">flight_id</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#confirm-first-class&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">result</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
</span><span class='line'>      <span class="c1">//I have a big problem missing the &#39;&#39; in the selector!</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/jquery-air-beginner/">Jquery-air-beginner</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-08-15T15:34:00-04:00" pubdate data-updated="true">Aug 15<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The DOM is a node structure or tree
has HTML tag, head tag, title child, body tag, etc.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">);</span>
</span><span class='line'><span class="c1">//find all h1s</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">);</span>
</span><span class='line'><span class="c1">//find all ps</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;p#final&quot;</span><span class="p">);</span>
</span><span class='line'><span class="c1">//find the paragraph with ID final</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//these return arrays with the elements inside</span>
</span><span class='line'><span class="c1">//if the search doesn&#39;t return anything, then it returns an empty array []</span>
</span><span class='line'><span class="c1">// be careful- this empty array is considered truthy</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;h1, p.plan&quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">//returns an array with both elements-- one string, seperated by commas</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;h1&quot;</span><span class="p">,</span> <span class="s2">&quot;p.plan&quot;</span><span class="p">)</span> <span class="c1">// THIS WON&#39;T WORK</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;p:first&#39;</span><span class="p">);</span>
</span><span class='line'><span class="c1">//returns the first p it encounters</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;p.first&#39;</span><span class="p">)</span>
</span><span class='line'><span class="c1">//looks for the p.first node</span>
</span></code></pre></td></tr></table></div></figure>


<p>To select children elements use a space between the parent and child selector&#8230;
For example, to select all the A tags that are children of a tag with id = foo, you&#8217;d do this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#foo a&#39;</span><span class="p">);</span>
</span><span class='line'><span class="c1">//in the exercise</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;ul#first_class li&#39;</span><span class="p">);</span>
</span><span class='line'><span class="c1">//Select all the rows and seats in first class, everything with an &lt;LI&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>You can go as many levels deep as you want when selecting children</li>
<li>For example, to select all A tags that have two <div> parents, you&#8217;d do this:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div div a&#39;</span><span class="p">);</span>
</span><span class='line'><span class="c1">//in the exercise:</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;ul li ul li&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Find all the window seats (a & d in first class, and a & f in economy)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;li.a, ul#first_class li.d, ul#economy_class li.f&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>can pass in a map which is like a hash in ruby
key are seperated from values by colons</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">belts</span> <span class="o">=</span> <span class="nx">confirm</span><span class="p">(</span><span class="s1">&#39;Turn on the fasten seatbelt sign?&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Seatbelts: &#39;</span> <span class="o">+</span> <span class="nx">belts</span><span class="p">);</span>
</span><span class='line'><span class="c1">//can string multiple calls together like above</span>
</span></code></pre></td></tr></table></div></figure>


<p>having trouble with the syntax of closing the parentheses.</p>

<h3>Why JS?</h3>

<p>HTML is for structure
CSS is for presentation
Javascript is for interaction &#8211; it shouldn&#8217;t take over the duties of the other two</p>

<pre><code>use .css() with reservation. better to manipulate the class and IDs 
</code></pre>

<p>.addClass()
.removeClass() //if you do this with no parameters it will strip it of all css classes</p>

<p>hasClass() #=> true /false</p>

<p>do/undo toggle pattern
(&#8216;p:first&#8217;).toggleClass(&#8220;bigger&#8221;):</p>

<p>.show()
.hide()
.toggle()</p>

<p>Document ready waits for the DOM to download then the DOM comes through. When it&#8217;s finished the ready event fires</p>

<p><strong><em>JSON</em></strong> is just a javascript map that gets passed around</p>

<p>DOM and CSS communicate through classes and IDs
use .css() with reservation. better to manipulate the class and IDs thereby delegating the responsbility to the css</p>

<h3>Common queries</h3>

<p>.text() => query text
.html() => queries html
.prepend() => inserts inside the taget object before
.append() => inserts inside the target object after
.before() => add element before selection
.after() => add element after selection
.remove => pulls the target from the DOM
to move an object remove it while storing it in a var and the insert it where you&#8217;d like (remember vars don&#8217;t require &#8217; &#8216;s )</p>

<h3>event bubbling</h3>

<p>JS is triggered by the environment or the user
if someone clicks on a span, the JS engine asks if anyone is listening for that click, or a click on the paragraph or the whole body&#8211; <strong><em>it walked up the DOM tree looking for event handlers</em></strong></p>

<h3>Functions</h3>

<p>function optionalname (parameters) {instructions}</p>

<figure class='code'><figcaption><span>For Instance</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">popWarning</span> <span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Warning: &quot;</span> <span class="o">+</span> <span class="nx">message</span><span class="p">);</span>    
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Anonymous Function
:  Just a function that isn&#8217;t given a name
so just function (parameters) {instructions}</p>

<figure class='code'><figcaption><span>Anon e.g. of previous function</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Warning: &quot;</span> <span class="o">+</span> <span class="nx">message</span><span class="p">);</span>    
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Since it has no name this can&#8217;t be called by another function. Instead it is passed in to another function.</p>

<figure class='code'><figcaption><span>Doc Ready</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;The DOM is ready!&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Got it&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>This: using this in javascript</h3>

<p>This refers to the current object (usually just a plain DOM element)
Since it&#8217;s not a jquery element, we need to wrap it in $(this)</p>

<figure class='code'><figcaption><span>Using this</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Document ready and Timing</h3>

<p>If wrapped in a $(document).ready() the JS won&#8217;t start looking though the document until every thing has been downloaded.</p>

<figure class='code'><figcaption><span>Named Functions</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">increment_weight</span><span class="p">(){</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">display</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div#gross_weight span#display&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">weight</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">display</span><span class="p">.</span><span class="nx">text</span><span class="p">());</span> <span class="c1">//notice parseInt doesn&#39;t need a $</span>
</span><span class='line'>  <span class="nx">weight</span> <span class="o">=</span> <span class="nx">weight</span> <span class="o">+</span> <span class="mi">50</span> <span class="p">;</span>
</span><span class='line'>  <span class="nx">display</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">weight</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span> <span class="p">(){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;a#weight_down&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
</span><span class='line'>  <span class="c1">// this code is run when a#weight_down is clicked</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">current_weight</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;span#display&#39;</span><span class="p">).</span><span class="nx">text</span><span class="p">();</span>
</span><span class='line'>  <span class="c1">//make sure you pull out the number, see the parseInt below</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">current_lbs</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">current_weight</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#display&quot;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">current_lbs</span> <span class="o">-</span> <span class="mi">50</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> <span class="c1">// this prevents it from following the link</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Hover</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span> <span class="p">(){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div#plane_features li&#39;</span><span class="p">).</span><span class="nx">hover</span><span class="p">(</span>
</span><span class='line'>  <span class="c1">//the hover accepts two functions- the on-hover and off-hover</span>
</span><span class='line'>  <span class="kd">function</span> <span class="p">(){</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;feature_hover&#39;</span><span class="p">);},</span>
</span><span class='line'>  <span class="c1">//note the &#39;,&#39; at the end of the line</span>
</span><span class='line'>  <span class="kd">function</span> <span class="p">(){</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;feature_hover&#39;</span><span class="p">)}</span>
</span><span class='line'>  <span class="p">)</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>This can be refactored as&#8230;.</p>

<figure class='code'><figcaption><span>Refactor</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div#plane_features li a&#39;</span><span class="p">).</span><span class="nx">hover</span><span class="p">(</span>
</span><span class='line'>    <span class="kd">function</span><span class="p">(){</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">&quot;feature_hover&quot;</span><span class="p">);}</span>
</span><span class='line'>  <span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>toggleClass</h3>

<p>Needs to be called on <em>this</em></p>

<p>This is what I had&#8230;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#plane_features li a&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
</span><span class='line'>      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">&quot;feature_selected&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="c1">//this is wrong... it needs to be THIS</span>
</span><span class='line'>      <span class="p">};</span> <span class="c1">// missed a closing parens here too</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span>The Answer</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#plane_features li a&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">&quot;feature_selected&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>KeyPress</h3>

<p>Put the focus on the entire body, because you aren&#8217;t sure what the focus will be when the key is pressed.</p>

<p>By defining the object with event e.g.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>we get access to the <em>Event Object</em> which helps us with such things as:
- event.which - has a numeric code for the key which is pressed
- event has other attributes like pageX, pageY and target.</p>

<h3>If statement</h3>

<figure class='code'><figcaption><span>IF</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">){</span><span class="nx">instructions</span><span class="p">};</span>
</span><span class='line'><span class="p">}</span> <span class="c1">//why no ; here?</span>
</span></code></pre></td></tr></table></div></figure>


<p>so&#8230;.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">==</span> <span class="mi">102</span><span class="p">){</span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;fantastic&quot;</span><span class="p">)};</span>
</span><span class='line'><span class="p">}</span> <span class="c1">//why no ; here?</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span> <span class="p">(){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">).</span><span class="nx">keydown</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">){</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">==</span> <span class="mi">83</span><span class="p">){</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;li:first&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">&quot;feature_selected&quot;</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span> <span class="c1">//still not ; here</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>event.stopPropogation</h3>

<p>call .stopPropogation in the handler to prevent the event from bubbling up the DOM tree</p>

<h3>Animation</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;div#altitude&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">(</span><span class="s2">&quot;slow&quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">// takes &quot;slow&quot;, &quot;fast&quot;, and number in milliseconds as a parameter</span>
</span></code></pre></td></tr></table></div></figure>


<p>This works with hide, the show and toggle functions
.slideUp(&#8220;slow&#8221;)
.slideDown()
.slideToggle()
.fadeOut()
.fadeIn()
.fadeToggle()</p>

<h3>True Ajax</h3>

<p>Sending and receiving information from the server via XMLHttpRequests
- best way to do that is with the .load() function</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;span.number&#39;</span><span class="p">).</span><span class="nx">load</span><span class="p">(</span><span class="err">/flights/824/gate);</span>
</span></code></pre></td></tr></table></div></figure>


<p>This load request will retrieve that address from the server and then inject it into the selected element an it and then the DOM will show that update</p>

<p>Attach a click event listener to the Refresh button that uses ajax to load &#8216;/nearby_flights&#8217; and places the response into the Nearby Flights list. Don&#8217;t forget to prevent the default link behavior.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;a#refresh&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;ul#nearby_flights&quot;</span><span class="p">).</span><span class="nx">load</span><span class="p">(</span><span class="s1">&#39;/nearby_flights&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/haw-day11/">HAW-day11</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-08-15T11:34:00-04:00" pubdate data-updated="true">Aug 15<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>return false;</h3>

<p>needed to prevent the confirm box cancel from going ahead with the action anyway&#8230;
I tried <a href="http://stackoverflow.com/questions/1469875/calling-another-jquery-function-if-confirm-is-true">.preventDefault()</a> first but it didn&#8217;t work.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/26/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/24/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/elastic-search/">Elastic Search</a>
      </li>
    
      <li class="post">
        <a href="/blog/preparing-data-for-machine-learning/">Preparing Data for Machine Learning</a>
      </li>
    
      <li class="post">
        <a href="/blog/the-soul-in-the-machine-developing-for-humans/">The Soul in The Machine - Developing for Humans</a>
      </li>
    
      <li class="post">
        <a href="/blog/intro-to-dns/">Intro to DNS</a>
      </li>
    
      <li class="post">
        <a href="/blog/7-righteous-fights/">7 righteous fights</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Adam Jonas -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'ajonas';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
